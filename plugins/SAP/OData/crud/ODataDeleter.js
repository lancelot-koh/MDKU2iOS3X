"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var BaseODataCruder_1 = require("./BaseODataCruder");
var ReadService_1 = require("./ReadService");
var ReadParamsFactory_1 = require("./ReadParamsFactory");
var ODataHelper_1 = require("../ODataHelper");
var ODataDeleter = /** @class */ (function (_super) {
    __extends(ODataDeleter, _super);
    function ODataDeleter(params) {
        var _this = _super.call(this, params) || this;
        _this.setTargetReadParams();
        return _this;
    }
    ODataDeleter.prototype.execute = function (dataService, changeSetManager) {
        this.setChangeSetManager(changeSetManager);
        var entityToDelete = ReadService_1.ReadService.entityFromParams(this.targetReadParams, dataService, this.changeSetManager);
        this.changeSetManager.deleteEntity(entityToDelete, this.headers);
        return ODataHelper_1.ODataHelper.entityValueToJson(entityToDelete, this.getDataContext(dataService));
    };
    ODataDeleter.prototype.setTargetReadParams = function () {
        this.targetReadParams = ReadParamsFactory_1.ReadParamsFactory.createReadParams(this.service);
    };
    return ODataDeleter;
}(BaseODataCruder_1.BaseODataCruder));
exports.ODataDeleter = ODataDeleter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT0RhdGFEZWxldGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiT0RhdGFEZWxldGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEscURBQW9EO0FBQ3BELDZDQUE0QztBQUM1Qyx5REFBd0Q7QUFDeEQsOENBQTZDO0FBRzdDO0lBQWtDLGdDQUFlO0lBRy9DLHNCQUFtQixNQUFXO1FBQTlCLFlBQ0Usa0JBQU0sTUFBTSxDQUFDLFNBRWQ7UUFEQyxLQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQzs7SUFDN0IsQ0FBQztJQUVNLDhCQUFPLEdBQWQsVUFBZSxXQUFnQixFQUFFLGdCQUFrQztRQUNqRSxJQUFJLENBQUMsbUJBQW1CLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUMzQyxJQUFJLGNBQWMsR0FBRyx5QkFBVyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxXQUFXLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDN0csSUFBSSxDQUFDLGdCQUFnQixDQUFDLFlBQVksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2pFLE1BQU0sQ0FBQyx5QkFBVyxDQUFDLGlCQUFpQixDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7SUFDekYsQ0FBQztJQUVPLDBDQUFtQixHQUEzQjtRQUNFLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxxQ0FBaUIsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDM0UsQ0FBQztJQUNILG1CQUFDO0FBQUQsQ0FBQyxBQWxCRCxDQUFrQyxpQ0FBZSxHQWtCaEQ7QUFsQlksb0NBQVkiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlT0RhdGFDcnVkZXIgfSBmcm9tICcuL0Jhc2VPRGF0YUNydWRlcic7XG5pbXBvcnQgeyBSZWFkU2VydmljZSB9IGZyb20gJy4vUmVhZFNlcnZpY2UnO1xuaW1wb3J0IHsgUmVhZFBhcmFtc0ZhY3RvcnkgfSBmcm9tICcuL1JlYWRQYXJhbXNGYWN0b3J5JztcbmltcG9ydCB7IE9EYXRhSGVscGVyIH0gZnJvbSAnLi4vT0RhdGFIZWxwZXInO1xuaW1wb3J0IHsgQ2hhbmdlU2V0TWFuYWdlciB9IGZyb20gJy4vQ2hhbmdlU2V0TWFuYWdlcic7XG5cbmV4cG9ydCBjbGFzcyBPRGF0YURlbGV0ZXIgZXh0ZW5kcyBCYXNlT0RhdGFDcnVkZXIge1xuICBwcml2YXRlIHRhcmdldFJlYWRQYXJhbXM6IGFueTtcblxuICBwdWJsaWMgY29uc3RydWN0b3IocGFyYW1zOiBhbnkpIHtcbiAgICBzdXBlcihwYXJhbXMpO1xuICAgIHRoaXMuc2V0VGFyZ2V0UmVhZFBhcmFtcygpO1xuICB9XG5cbiAgcHVibGljIGV4ZWN1dGUoZGF0YVNlcnZpY2U6IGFueSwgY2hhbmdlU2V0TWFuYWdlcjogQ2hhbmdlU2V0TWFuYWdlcik6IHN0cmluZyB7XG4gICAgdGhpcy5zZXRDaGFuZ2VTZXRNYW5hZ2VyKGNoYW5nZVNldE1hbmFnZXIpO1xuICAgIGxldCBlbnRpdHlUb0RlbGV0ZSA9IFJlYWRTZXJ2aWNlLmVudGl0eUZyb21QYXJhbXModGhpcy50YXJnZXRSZWFkUGFyYW1zLCBkYXRhU2VydmljZSwgdGhpcy5jaGFuZ2VTZXRNYW5hZ2VyKTtcbiAgICB0aGlzLmNoYW5nZVNldE1hbmFnZXIuZGVsZXRlRW50aXR5KGVudGl0eVRvRGVsZXRlLCB0aGlzLmhlYWRlcnMpO1xuICAgIHJldHVybiBPRGF0YUhlbHBlci5lbnRpdHlWYWx1ZVRvSnNvbihlbnRpdHlUb0RlbGV0ZSwgdGhpcy5nZXREYXRhQ29udGV4dChkYXRhU2VydmljZSkpO1xuICB9XG4gIFxuICBwcml2YXRlIHNldFRhcmdldFJlYWRQYXJhbXMoKTogdm9pZCB7XG4gICAgdGhpcy50YXJnZXRSZWFkUGFyYW1zID0gUmVhZFBhcmFtc0ZhY3RvcnkuY3JlYXRlUmVhZFBhcmFtcyh0aGlzLnNlcnZpY2UpO1xuICB9XG59XG4iXX0=